
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>resilient.patch &#8212; Resilient Python API 40.1.1879 documentation</title>
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <h1>Source code for resilient.patch</h1><div class="highlight"><pre>
<span></span><span class="ch">#!/usr/bin/env python</span>
<span class="c1"># -*- coding: utf-8 -*-</span>
<span class="c1"># (c) Copyright IBM Corp. 2010, 2017. All Rights Reserved.</span>

<span class="sd">&quot;&quot;&quot;Methods and classes for manipulating patch-related elements for the Resilient REST API&quot;&quot;&quot;</span>

<span class="kn">import</span> <span class="nn">collections</span>


<span class="k">class</span> <span class="nc">Change</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Represents a change in a Patch object.&quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">new_value</span><span class="p">,</span> <span class="n">old_value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">field_name</span> <span class="o">=</span> <span class="n">field_name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">new_value</span> <span class="o">=</span> <span class="n">new_value</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">old_value</span> <span class="o">=</span> <span class="n">old_value</span>

    <span class="k">def</span> <span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Creates a DTO/dict object from this change.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">dict</span><span class="p">(</span><span class="n">field</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">field_name</span><span class="p">,</span>
                    <span class="n">new_value</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="nb">object</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">new_value</span><span class="p">),</span>
                    <span class="n">old_value</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="nb">object</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">old_value</span><span class="p">))</span>


<div class="viewcode-block" id="Patch"><a class="viewcode-back" href="../../resilient.html#resilient.Patch">[docs]</a><span class="k">class</span> <span class="nc">Patch</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Represents a patch to be applied to an object on the server.&quot;&quot;&quot;</span>
<div class="viewcode-block" id="Patch.__init__"><a class="viewcode-back" href="../../resilient.html#resilient.Patch.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">previous_object</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :param previous_object: The last known state of the object being patched.  You can supply None here, but</span>
<span class="sd">             if you do that then you&#39;ll need to provide old_value in your calls to add_value.</span>
<span class="sd">        :param version: The last known version of the object being patched.  If omitted then the &#39;vers&#39; item in</span>
<span class="sd">             the passed in previous_object will be used.  If one doesn&#39;t exist there then the version</span>
<span class="sd">             won&#39;t be passed to the server.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">previous_object</span> <span class="o">=</span> <span class="n">previous_object</span>

        <span class="k">if</span> <span class="n">version</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">version</span> <span class="o">=</span> <span class="n">version</span>
        <span class="k">elif</span> <span class="s2">&quot;vers&quot;</span> <span class="ow">in</span> <span class="n">previous_object</span><span class="p">:</span>
            <span class="c1"># if the object contains a &quot;vers&quot; field, then use it.</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">version</span> <span class="o">=</span> <span class="n">previous_object</span><span class="p">[</span><span class="s2">&quot;vers&quot;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">version</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="c1"># Keep the changes ordered.  Really this just simplifies testing a little bit with no perceivable</span>
        <span class="c1"># downside.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">changes</span> <span class="o">=</span> <span class="n">collections</span><span class="o">.</span><span class="n">OrderedDict</span><span class="p">()</span></div>

    <span class="k">def</span> <span class="nf">_get_base_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field_name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Helper to get the value for a field from the previous_object (base object) passed into</span>
<span class="sd">        our constructor.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">previous_object</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Constructor previous_object or method old_value argument is required&quot;</span><span class="p">)</span>

        <span class="n">val</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">previous_object</span>

        <span class="n">parts</span> <span class="o">=</span> <span class="n">field_name</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">part</span> <span class="ow">in</span> <span class="n">parts</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">part</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">val</span><span class="p">:</span>
                <span class="n">val</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="k">break</span>

            <span class="n">val</span> <span class="o">=</span> <span class="n">val</span><span class="p">[</span><span class="n">part</span><span class="p">]</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Invalid field_name parameter&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">val</span>

<div class="viewcode-block" id="Patch.add_value"><a class="viewcode-back" href="../../resilient.html#resilient.Patch.add_value">[docs]</a>    <span class="k">def</span> <span class="nf">add_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">new_value</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Adds a value to the patch.</span>

<span class="sd">           :param field_name: The name of the field.</span>
<span class="sd">           :param new_value: The value to add to the patch.</span>
<span class="sd">           :param old_value: The last known value of the field being patched.  If omitted then we&#39;ll pull the old</span>
<span class="sd">                      value from the previous_object that you passed into the constructor.&quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="s2">&quot;old_value&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="n">old_value</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;old_value&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">old_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_base_value</span><span class="p">(</span><span class="n">field_name</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">changes</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">Change</span><span class="p">(</span><span class="n">field_name</span><span class="p">,</span> <span class="n">new_value</span><span class="p">,</span> <span class="n">old_value</span><span class="p">)</span></div>

<div class="viewcode-block" id="Patch.exchange_conflicting_value"><a class="viewcode-back" href="../../resilient.html#resilient.Patch.exchange_conflicting_value">[docs]</a>    <span class="k">def</span> <span class="nf">exchange_conflicting_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">patch_status</span><span class="p">,</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">new_value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Call this method to update the patch object from within a conflict handler.</span>

<span class="sd">        :param patch_status: The PatchStatus object passed into your patch conflict callback.</span>
<span class="sd">        :param field_name: The name of the field whose value is to be exchanged.</span>
<span class="sd">        :param new_value: The new value to use in the patch (for the next patch operation).  Note that you may</span>
<span class="sd">                want to base your new_value on the result of `patch_status.get_actual_current_value(field_name)`</span>
<span class="sd">                since that will be what the other user changed the field to.  If you do not consider that previous</span>
<span class="sd">                value then you are effectively overwriting what they did.  Overwriting may be what you want,</span>
<span class="sd">                depending on your application, but it likely that you want to somehow consider what the other</span>
<span class="sd">                user did.  If you just want to overwrite all changes note that you can use</span>
<span class="sd">                `SimpleClient.patch(..., overwrite_conflict = True)`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">current_value</span> <span class="o">=</span> <span class="n">patch_status</span><span class="o">.</span><span class="n">get_actual_current_value</span><span class="p">(</span><span class="n">field_name</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">changes</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">Change</span><span class="p">(</span><span class="n">field_name</span><span class="p">,</span> <span class="n">new_value</span><span class="p">,</span> <span class="n">current_value</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">_get_change_with_field_named</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field_name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Helper to find an existing change in the list of changes.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">field_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">changes</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">changes</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span>

        <span class="k">return</span> <span class="kc">None</span>

<div class="viewcode-block" id="Patch.update_for_overwrite"><a class="viewcode-back" href="../../resilient.html#resilient.Patch.update_for_overwrite">[docs]</a>    <span class="k">def</span> <span class="nf">update_for_overwrite</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">patch_status</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Changes to patch to reflect the current values in patch_status_dict.  Use this method if you want to</span>
<span class="sd">        re-apply a patch operation that failed because of field conflicts...without concern with the previous</span>
<span class="sd">        values.</span>

<span class="sd">        :param patch_status: The dictionary returned by the patch operation.</span>
<span class="sd">            It is assumed that this has a &quot;field_failures&quot; property.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">patch_status</span><span class="o">.</span><span class="n">has_field_failures</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Expected field_failures in patch status return&quot;</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">field_name</span> <span class="ow">in</span> <span class="n">patch_status</span><span class="o">.</span><span class="n">get_conflict_fields</span><span class="p">():</span>
            <span class="n">change</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_change_with_field_named</span><span class="p">(</span><span class="n">field_name</span><span class="p">)</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="n">change</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;No change exists for field failure found in patch status&quot;</span><span class="p">)</span>

            <span class="n">change</span><span class="o">.</span><span class="n">old_value</span> <span class="o">=</span> <span class="n">patch_status</span><span class="o">.</span><span class="n">get_actual_current_value</span><span class="p">(</span><span class="n">field_name</span><span class="p">)</span></div>

<div class="viewcode-block" id="Patch.get_old_values"><a class="viewcode-back" href="../../resilient.html#resilient.Patch.get_old_values">[docs]</a>    <span class="k">def</span> <span class="nf">get_old_values</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets all the &#39;old values&#39; from the patch (for all fields).  The SimpleClient uses this to</span>
<span class="sd">        determine if anything has changed when calling the patch conflict callback.</span>

<span class="sd">        :return: A new list that contains all of the &#39;old values&#39; in the patch.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">change</span><span class="o">.</span><span class="n">old_value</span> <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">change</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">changes</span><span class="o">.</span><span class="n">items</span><span class="p">()]</span></div>

<div class="viewcode-block" id="Patch.has_changes"><a class="viewcode-back" href="../../resilient.html#resilient.Patch.has_changes">[docs]</a>    <span class="k">def</span> <span class="nf">has_changes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Determines if this patch has any changes.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">changes</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span></div>

<div class="viewcode-block" id="Patch.get_old_value"><a class="viewcode-back" href="../../resilient.html#resilient.Patch.get_old_value">[docs]</a>    <span class="k">def</span> <span class="nf">get_old_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field_name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets the old value for the specified field in the patch.</span>

<span class="sd">        :param field_name: The field in question.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">changes</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span><span class="o">.</span><span class="n">old_value</span></div>

<div class="viewcode-block" id="Patch.get_new_value"><a class="viewcode-back" href="../../resilient.html#resilient.Patch.get_new_value">[docs]</a>    <span class="k">def</span> <span class="nf">get_new_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field_name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets the new value for the specified field in the patch.</span>

<span class="sd">        :param field_name: The field in question.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">changes</span><span class="p">[</span><span class="n">field_name</span><span class="p">]</span><span class="o">.</span><span class="n">new_value</span></div>

<div class="viewcode-block" id="Patch.delete_value"><a class="viewcode-back" href="../../resilient.html#resilient.Patch.delete_value">[docs]</a>    <span class="k">def</span> <span class="nf">delete_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field_name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Removes the change for the specified field.</span>

<span class="sd">        :param field_name: The field to remove.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">field_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">changes</span><span class="p">:</span>
            <span class="k">del</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">changes</span><span class="p">[</span><span class="n">field_name</span><span class="p">])</span></div>

<div class="viewcode-block" id="Patch.to_dict"><a class="viewcode-back" href="../../resilient.html#resilient.Patch.to_dict">[docs]</a>    <span class="k">def</span> <span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Converts this patch object to a dict that can be posted to the server.&quot;&quot;&quot;</span>
        <span class="n">changes</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">change</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">changes</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">changes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">change</span><span class="o">.</span><span class="n">to_dict</span><span class="p">())</span>

        <span class="n">patch</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">changes</span><span class="o">=</span><span class="n">changes</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">version</span><span class="p">:</span>
            <span class="n">patch</span><span class="p">[</span><span class="s2">&quot;version&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">version</span>

        <span class="k">return</span> <span class="n">patch</span></div></div>


<div class="viewcode-block" id="PatchStatus"><a class="viewcode-back" href="../../resilient.html#resilient.PatchStatus">[docs]</a><span class="k">class</span> <span class="nc">PatchStatus</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Represents the patch status returned by the patch endpoint.&quot;&quot;&quot;</span>
<div class="viewcode-block" id="PatchStatus.__init__"><a class="viewcode-back" href="../../resilient.html#resilient.PatchStatus.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">patch_status_dict</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Constructs a PatchStatus object</span>

<span class="sd">           :param patch_status_dict: The dictionary returned by the patch operation.&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">patch_status_dict</span> <span class="o">=</span> <span class="n">patch_status_dict</span></div>

    <span class="k">def</span> <span class="nf">_get_patch_failure</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">should_raise</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Internal helper to find the FieldPatchFailureDTO for a given field.</span>
<span class="sd">           field_name: The name of the field to find.</span>
<span class="sd">           should_raise: Should a ValueError be raised if the field isn&#39;t found or should we just return None?&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">failure</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">patch_status_dict</span><span class="p">[</span><span class="s2">&quot;field_failures&quot;</span><span class="p">]:</span>
            <span class="k">if</span> <span class="n">failure</span><span class="p">[</span><span class="s2">&quot;field&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">field_name</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">failure</span>

        <span class="k">if</span> <span class="n">should_raise</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;No conflict found for field </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">field_name</span><span class="p">))</span>

        <span class="k">return</span> <span class="kc">None</span>

<div class="viewcode-block" id="PatchStatus.is_success"><a class="viewcode-back" href="../../resilient.html#resilient.PatchStatus.is_success">[docs]</a>    <span class="k">def</span> <span class="nf">is_success</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Was the patch operation successful?&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">patch_status_dict</span><span class="p">[</span><span class="s2">&quot;success&quot;</span><span class="p">]</span></div>

<div class="viewcode-block" id="PatchStatus.has_field_failures"><a class="viewcode-back" href="../../resilient.html#resilient.PatchStatus.has_field_failures">[docs]</a>    <span class="k">def</span> <span class="nf">has_field_failures</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Is there at least one field failure?&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s2">&quot;field_failures&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">patch_status_dict</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">patch_status_dict</span><span class="p">[</span><span class="s2">&quot;field_failures&quot;</span><span class="p">])</span> <span class="o">&gt;</span> <span class="mi">0</span></div>

<div class="viewcode-block" id="PatchStatus.get_conflict_fields"><a class="viewcode-back" href="../../resilient.html#resilient.PatchStatus.get_conflict_fields">[docs]</a>    <span class="k">def</span> <span class="nf">get_conflict_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get a list of the conflicting field names.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="s2">&quot;field&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">patch_status_dict</span><span class="p">[</span><span class="s2">&quot;field_failures&quot;</span><span class="p">]]</span></div>

<div class="viewcode-block" id="PatchStatus.is_conflict_field"><a class="viewcode-back" href="../../resilient.html#resilient.PatchStatus.is_conflict_field">[docs]</a>    <span class="k">def</span> <span class="nf">is_conflict_field</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field_name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Is the specified field_name amongst the conflicting fields?</span>
<span class="sd">           field_name: The field in question.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_patch_failure</span><span class="p">(</span><span class="n">field_name</span><span class="p">,</span> <span class="n">should_raise</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="PatchStatus.get_your_original_value"><a class="viewcode-back" href="../../resilient.html#resilient.PatchStatus.get_your_original_value">[docs]</a>    <span class="k">def</span> <span class="nf">get_your_original_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field_name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the value that *you* specified in the original patch for the specified field.  Raises a ValueError</span>
<span class="sd">           if the field with the name field_name is not amongst the list of conflicting fields.</span>

<span class="sd">           :param field_name: The name of the field in question.&quot;&quot;&quot;</span>
        <span class="n">failure</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_patch_failure</span><span class="p">(</span><span class="n">field_name</span><span class="p">,</span> <span class="n">should_raise</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">failure</span><span class="p">[</span><span class="s2">&quot;your_original_value&quot;</span><span class="p">]</span></div>

<div class="viewcode-block" id="PatchStatus.get_actual_current_value"><a class="viewcode-back" href="../../resilient.html#resilient.PatchStatus.get_actual_current_value">[docs]</a>    <span class="k">def</span> <span class="nf">get_actual_current_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field_name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the current server value for the conflicting field.  Raises a ValueError</span>
<span class="sd">           if the field with the name field_name is not amongst the list of conflicting fields.</span>

<span class="sd">           :param field_name: The name of the field in question.&quot;&quot;&quot;</span>
        <span class="n">failure</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_patch_failure</span><span class="p">(</span><span class="n">field_name</span><span class="p">,</span> <span class="n">should_raise</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">failure</span><span class="p">[</span><span class="s2">&quot;actual_current_value&quot;</span><span class="p">]</span></div>

<div class="viewcode-block" id="PatchStatus.get_message"><a class="viewcode-back" href="../../resilient.html#resilient.PatchStatus.get_message">[docs]</a>    <span class="k">def</span> <span class="nf">get_message</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Gets the message associated with the patch status (or None if there wasn&#39;t one).&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="s2">&quot;message&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">patch_status_dict</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">patch_status_dict</span><span class="p">[</span><span class="s2">&quot;message&quot;</span><span class="p">]</span>

        <span class="k">return</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="PatchStatus.to_dict"><a class="viewcode-back" href="../../resilient.html#resilient.PatchStatus.to_dict">[docs]</a>    <span class="k">def</span> <span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the underlying dict representation of this PatchStatus object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">patch_status_dict</span></div></div>
</pre></div>

          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../index.html">Resilient Python API</a></h1>








<h3>Navigation</h3>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../resilient.html">resilient package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../resilient_circuits.html">resilient_circuits package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../resilient_lib.html">resilient_lib package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../pytest_resilient_circuits.html">pytest_resilient_circuits package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../rc-webserver.html">rc-webserver package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../rc-cts.html">rc-cts package</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  <li><a href="../index.html">Module code</a><ul>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2010-2019 International Business Machines Corporation.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 3.5.3</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
    </div>

    

    
  </body>
</html>